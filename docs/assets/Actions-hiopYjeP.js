import{_ as g}from"./HeaderFilter-DCpLAxz4.js";import{r as o,d,c as _,o as k,b as l,e as u,w as b,f as h,u as m,i as y}from"./index-am2XyCxo.js";const S={class:"relative z-5 pt-25 w-full shadow-md bg-header text-rice-500"},T={class:"container mx-auto flex items-center p-4"},j={class:"w-1/3"},A={class:"p-10 flex flex-col justify-center items-center gap-8 max-w-7xl md:mx-auto"},p=3,E={__name:"Actions",setup(C){const c=y("handleAppScroll"),f=o(null),a=o({sdgs:[],time:"all",startDate:"",endDate:"",keyword:""}),i=o(1),w=t=>{a.value=t,i.value=1},v=d(()=>{let t=f.value;if(a.value.sdgs.length>0&&(t=t.filter(e=>e.types&&e.types.some(s=>a.value.sdgs.includes(s)))),a.value.time!=="all"){const e=new Date;let s,r;switch(a.value.time){case"day":r=new Date(e),s=new Date(e),s.setDate(e.getDate()-1);break;case"week":r=new Date(e),s=new Date(e),s.setDate(e.getDate()-7);break;case"custom":a.value.startDate&&a.value.endDate&&(s=new Date(a.value.startDate),s.setHours(0,0,0,0),r=new Date(a.value.endDate),r.setHours(23,59,59,999));break}s&&r&&(t=t.filter(n=>{if(!n.startTime||!n.endTime||!String(n.startTime).trim()||!String(n.endTime).trim())return!1;const x=new Date(Number(n.startTime)*1e3),D=new Date(Number(n.endTime)*1e3);return x<=r&&D>=s}))}return a.value.keyword&&(t=t.filter(e=>e.title.toLowerCase().includes(a.value.keyword.toLowerCase()))),t});return d(()=>{const t=(i.value-1)*p,e=t+p;return v.value.slice(t,e)}),(t,e)=>{const s=h("router-link");return k(),_("div",{class:"page-background content-scroller",onScroll:e[0]||(e[0]=(...r)=>m(c)&&m(c)(...r))},[l("header",S,[l("div",T,[l("div",j,[u(s,{to:"/",class:"back-home-btn"},{default:b(()=>[...e[1]||(e[1]=[l("span",{class:"text"},"回首頁",-1),l("span",{class:"icon"},"←",-1)])]),_:1})]),e[2]||(e[2]=l("div",{class:"w-1/3 text-center"},[l("h1",{class:"text-2xl md:text-3xl font-bold"},"行動追蹤")],-1)),e[3]||(e[3]=l("div",{class:"w-1/3"},null,-1))])]),l("main",A,[u(g,{"onUpdate:filters":w,class:"flex flex-wrap justify-center items-center gap-4"})])],32)}}};export{E as default};
