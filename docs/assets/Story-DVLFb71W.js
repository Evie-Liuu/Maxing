import{_ as v}from"./HeaderFilter--trmmUMB.js";import{r as o,d as w,c as x,o as D,b as a,e as u,w as g,f as _,u as d,i as y}from"./index-B7E-9B62.js";const k={class:"relative z-5 pt-25 w-full shadow-md bg-header text-rice-500"},h={class:"container mx-auto flex items-center p-4"},b={class:"w-1/3"},S={class:"p-10 flex flex-col justify-center items-center gap-8"},N={__name:"Story",setup(j){const i=y("handleAppScroll"),f=o(null),t=o({sdgs:[],time:"all",startDate:"",endDate:"",keyword:""}),m=o(1),p=s=>{t.value=s,m.value=1};return w(()=>{let s=f.value;if(t.value.sdgs.length>0&&(s=s.filter(e=>e.types&&e.types.some(n=>t.value.sdgs.includes(n)))),t.value.time!=="all"){const e=new Date;s=s.filter(n=>{if(!n.time||String(n.time).trim()==="")return!1;const r=new Date(Number(n.time)*1e3);if(t.value.time==="day"){const l=new Date;return l.setDate(e.getDate()-1),r>=l}else if(t.value.time==="week"){const l=new Date;return l.setDate(e.getDate()-7),r>=l}else if(t.value.time==="custom"&&t.value.startDate&&t.value.endDate){const l=new Date(t.value.startDate);l.setHours(0,0,0,0);const c=new Date(t.value.endDate);return c.setHours(23,59,59,999),r>=l&&r<=c}return!0})}return t.value.keyword&&(s=s.filter(e=>e.title.toLowerCase().includes(t.value.keyword.toLowerCase()))),s}),(s,e)=>{const n=_("router-link");return D(),x("div",{class:"page-background content-scroller h-screen flex flex-col",onScroll:e[0]||(e[0]=(...r)=>d(i)&&d(i)(...r))},[a("header",k,[a("div",h,[a("div",b,[u(n,{to:"/sdgs",class:"back-home-btn"},{default:g(()=>[...e[1]||(e[1]=[a("span",{class:"text"},"回上頁",-1),a("span",{class:"icon"},"←",-1)])]),_:1})]),e[2]||(e[2]=a("div",{class:"w-1/3 text-center"},[a("h1",{class:"text-2xl md:text-3xl font-bold"},"故事牆")],-1)),e[3]||(e[3]=a("div",{class:"w-1/3 flex items-center justify-end pr-4 gap-2"},null,-1))])]),a("main",S,[u(v,{"onUpdate:filters":p,class:"flex flex-wrap justify-center items-center gap-4 md:px-50"})])],32)}}};export{N as default};
